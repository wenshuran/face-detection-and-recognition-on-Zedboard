# Face-Detection-and-Recognition-on-Zedboard
Using opencv2 for detection and zynqnet as backbone for recognition. This is a project of Hardware design course in BJUT.

The recognition part is unfinished yet.

## Cross Compile
The *cross_compile* folder contains the cross compiler arm-linux-gnueabihf-gcc and arm-linux-gnueabihf-g++. You should export the *bin* path before using it.

## Opencv
The *opencv* folder is generated by the cross compiler and can be directly move to the corresponding folder under */usr/*.
It also contains libstdc++.so and libgcc_so.so to avoid some execute errors.

## Vivado Project
The *ov7670_vga* folder is the hardware design project. We obtain video stream through ov7670, pass the stream to PS by vdma, process each frame, send the processed image back to PL through vdma, and display the stream on a 640x480 VGA screen.

## PS implementation
The *test_vdma* folder is built in Linux. After coding the file, use the cross compiler to compile it, and send the generated file to the board.
Here is a sample compile method using opencv.
```
arm-linux-gnueabihf-g++ test.cpp -o test -I/home/wenshuran/opencv/zed/opencv-2.4.13.7/install/include/ -L/home/wenshuran/opencv/zed/opencv-2.4.13.7/install/lib/ -lopencv_calib3d -lopencv_contrib -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_gpu -lopencv_highgui -lopencv_imgproc -lopencv_legacy -lopencv_ml -lopencv_nonfree -lopencv_objdetect -lopencv_photo -lopencv_stitching -lopencv_superres -lopencv_ts -lopencv_video -lopencv_videostab -lrt -lpthread -lm -ldl
```

## Linux on zedboard
The linux image is generated through petalinux 2018.2, we simply sent the system_wrapper.hdf to it and get the output after few steps.
After dividing the SD card into two parts(like 100M fat32 and 7.6G ext4 for me), copy the *BOOT.BIN* and *image.ub* file into fat32 and *rootfs.cpio* file into ext4.
Use the command:
```
sudo pax -rvf rootfs.cpio
```
to get the file system.

